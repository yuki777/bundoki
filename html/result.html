<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>ゴキゲン分度器</title>
    <meta name="description" content="あなたのツイートからゴキゲン度合いを分析して表示します">
    <meta name="author" content="分度器ジャスティス45°">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="css/bootstrap.css" rel="stylesheet">
    <style type="text/css">
      body {
        padding-top: 60px;
      }
    </style>

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/tora57x57.jpg">
    <link rel="apple-touch-icon" sizes="72x72" href="images/tora72x72.jpg">
    <link rel="apple-touch-icon" sizes="114x114" href="images/tora114x114.jpg">

    <!-- google chart -->
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">
      google.load("visualization", "1", {packages:["corechart"]});
      google.setOnLoadCallback(drawChart);
      function drawChart() {

        // percent
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Type');
        data.addColumn('number', 'Percent');
        data.addRows(3);
        data.setValue(0, 0, 'Positive');
        data.setValue(0, 1, <?php echo $point['percent_positive']?>);
        data.setValue(1, 0, 'Negative');
        data.setValue(1, 1, <?php echo $point['percent_negative']?>);
        data.setValue(2, 0, 'Unknown');
        data.setValue(2, 1, <?php echo $point['percent_unknown']?>);
        var chart = new google.visualization.PieChart(document.getElementById('percent_chart'));
        chart.draw(data, {width: 450, height: 300, title: 'by percent'});

        // count
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Point');
        data.addColumn('number', 'Positive');
        data.addColumn('number', 'Negative');
        data.addColumn('number', 'Unknown');
        data.addRows(1);
        data.setValue(0, 0, '');
        data.setValue(0, 1, <?php echo $point['total_positive'] ?>);
        data.setValue(0, 2, <?php echo $point['total_negative'] ?>);
        data.setValue(0, 3, <?php echo $point['total_unknown'] ?>);
        var chart = new google.visualization.ColumnChart(document.getElementById('point_chart'));
        chart.draw(data, {width: 450, height: 300, title: 'by point' });
      }
    </script>
    <!-- /google chart -->
  </head>

  <body>

    <div class="topbar">
      <div class="fill">
        <div class="container">
          <a class="brand" href="/">ゴキゲン分度器</a>
          <ul class="nav">
            <li class="active"><a href="/">Home</a></li>
            <li><a href="#about">About</a></li>
            <li><a href="#contact">Contact</a></li>
            <?php
                if($is_login){
                    echo '<li><a href="clearsessions.php">logout</a></li>';
                }
            ?>
          </ul>
        </div>
      </div>
    </div>

    <div class="container">

      <!-- Main hero unit for a primary marketing message or call to action -->
      <div class="hero-unit">
	  <h1>ゴキゲンいかが？</h1>
      <p><?php echo $message; ?></p>
      <p><a target="_brank" href="https://twitter.com/intent/tweet?text=+<?php echo urlencode($message); ?>++">結果をTwitterでつぶやこう</a></p>

      <div id="percent_chart"></div>
      <div id="point_chart"></div>
      </div>

      <!-- Example row of columns -->
      <div class="row">
        <div class="span-one-third">
          <h2>Heading</h2>
          <p>Etiam porta sem malesuada magna mollis euismod. Integer posuere erat a ante venenatis dapibus posuere velit aliquet. Aenean eu leo quam. Pellentesque ornare sem lacinia quam venenatis vestibulum. Duis mollis, est non commodo luctus, nisi erat porttitor ligula, eget lacinia odio sem nec elit.</p>
          <p><a class="btn" href="#">View details &raquo;</a></p>
        </div>
        <div class="span-one-third">
          <h2>Heading</h2>
           <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
          <p><a class="btn" href="#">View details &raquo;</a></p>
       </div>
        <div class="span-one-third">
          <h2>Heading</h2>
          <p>Donec sed odio dui. Cras justo odio, dapibus ac facilisis in, egestas eget quam. Vestibulum id ligula porta felis euismod semper. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus.</p>
          <p><a class="btn" href="#">View details &raquo;</a></p>
        </div>
      </div>

    <?php
    foreach($emotion_list as $emotion){
        // text
        $text = $emotion['text'];
        $text = trim($text);
        if(! $text) continue;

        // font color
        $color = "";
        if($emotion['positive_or_negative'] == 'positive') $color = "green";
        if($emotion['positive_or_negative'] == 'negative') $color = "red";

        // print
        echo "<li>";
        echo "[".$emotion['positive_or_negative']."]";
        echo '<font color="'.$color.'">';
        echo $text;
        echo "</font>";
        echo "</li>";
    }
    ?>

	<footer><p>&copy; <?php echo SITE_URL;?> 2011</p></footer>

    </div> <!-- /container -->

    <?php include('html/google_analytics.html'); ?>

  </body>
</html>
